!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("playkit-js")):"function"==typeof define&&define.amd?define(["playkit-js"],e):"object"==typeof exports?exports.youbora=e(require("playkit-js")):(t.playkit=t.playkit||{},t.playkit.youbora=e(t.playkit.core))}(this,function(t){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=29)}([function(t,e,i){var n=i(4),r=i(11),s={_emitter:new n,on:function(){s._emitter.on.apply(s._emitter,arguments)},off:function(){s._emitter.off.apply(s._emitter,arguments)},emit:function(){s._emitter.emit.apply(s._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:"log"},logLevel:5,plainLogs:!1,report:function(t,e,i){if(console&&console.log){e=e||s.Level.NOTICE,i=i||"darkcyan";var n={5:"e",4:"w",3:"n",2:"d",1:"v"},a=n[e],o="[Youbora]"+s._getCurrentTime()+" "+a+":";if(this.emit("log",{level:e,msg:t,prefix:o}),s.logLevel<=e)if(s.plainLogs||document.documentMode)s._plainReport(t,o);else{var d;d=e===s.Level.ERROR&&console.error?console.error:e===s.Level.WARNING&&console.warn?console.warn:e===s.Level.DEBUG&&console.debug?console.debug:console.log,o="%c"+o,r(t)?(t.splice(0,0,o,"color: "+i),d.apply(console,t)):d.call(console,o,"color: "+i,t)}}},_getCurrentTime:function(){var t=new Date;return"["+("0"+t.getDate()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+"."+("00"+t.getMilliseconds()).slice(-3)+"]"},_plainReport:function(t,e){if(t instanceof Array)for(var i in t)s._plainReport(t[i],e);else"string"==typeof t?console.log(e+" "+t):(console.log(e+" <next line>"),console.log(t))},error:function(){s.report([].slice.call(arguments),s.Level.ERROR,"darkred")},warn:function(){s.report([].slice.call(arguments),s.Level.WARNING,"darkorange")},notice:function(){s.report([].slice.call(arguments),s.Level.NOTICE,"darkgreen")},debug:function(){s.report([].slice.call(arguments),s.Level.DEBUG,"indigo")},verbose:function(){s.report([].slice.call(arguments),s.Level.VERBOSE,"navy")},loadLevelFromUrl:function(){if("undefined"!=typeof window&&window.location&&window.location.search){var t=/\?.*&*youbora-debug=(.+)/i.exec(window.location.search);null!==t&&(s.logLevel=t[1]);null!==/\?.*&*youbora-debug=plain/i.exec(window.location.search)&&(s.plainLogs=!0)}}};t.exports=s},function(t,e,i){var n=i(16),r=i(33),s=function(){};s.prototype={constructor:function(){}},s.extend=function(t,e){var i,s=this;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return s.apply(this,arguments)},n(i,s,e),i.prototype=r(s.prototype),t&&n(i.prototype,t),i.prototype.constructor=i,i.__super__=s.prototype,i},t.exports=s},function(t,e,i){var n=i(0),r={stripProtocol:function(t){try{return t.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(e){return n.warn(e),t}},addProtocol:function(t,e){try{return!0===e?"https://"+t:0===window.location.protocol.indexOf("http")?"//"+t:"http://"+t}catch(t){return n.warn(t),"http://localhost/"}},parseNumber:function(t,e){return!isNaN(t)&&t>=0&&t!==1/0&&t!==-1/0&&null!==t&&void 0!==t?t:e},logAllEvents:function(t,e,i){try{if(n.logLevel<=n.Level.DEBUG){i=i||function(t){n.debug("Event: "+t.type)};var r=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];e&&(null===e[0]?(e.shift(),r=e):r=r.concat(e));for(var s=0;s<r.length;s++)"function"==typeof t?t.call(window,r[s],i):t.on?t.on(r[s],i):t.addEventListener&&t.addEventListener(r[s],i)}}catch(t){n.error(t)}},buildRenditionString:function(t,e,i){1===arguments.length&&(i=t,t=null,e=null);var n="";return t&&e&&(n=t+"x"+e,i>0&&(n+="@")),i<1?n:(i<1e3?n+=Math.round(i)+"bps":i<1e6?(i=Math.round(i/1e3),n+=i+"Kbps"):(i=Math.round(i/1e4)/100,n+=i+"Mbps"),n||null)},buildErrorParams:function(t,e,i,n){if("object"==typeof t)return t;var r={};return r.errorCode=t||"FAILURE",r.msg=e||r.errorCode,r.errorMetadata=i,r.errorLevel=n,r},assign:i(16),isArray:i(11)};t.exports=r},function(t,e){var i={Service:{DATA:"/data",INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_BLOCKED:"/adBlocked",EVENT:"/infinity/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat"},WillSendEvent:{WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_BLOCKED:"will-send-ad-blocked",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event"}};t.exports=i},function(t,e,i){var n=i(1),r=i(11),s=n.extend({on:function(t,e){if(this._listeners=this._listeners||{},"function"==typeof e)return this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this},off:function(t,e){if(this._listeners=this._listeners||{},this._listeners[t]){var i=this._listeners[t].indexOf(e);-1!==i&&this._listeners[t].splice(i,1)}return this},emit:function(t,e){return this._listeners=this._listeners||{},e=e||{},r(this._listeners[t])&&this._listeners[t].forEach(this._eachCallback.bind(this,t,e)),r(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,t,e)),this},_eachCallback:function(t,e,i){"function"==typeof i&&i({type:t,data:e,target:this})}});t.exports=s},function(t,e,i){var n=i(1),r=i(0),s=i(2),a=n.extend({constructor:function(t,e,i,n){this.xhr=this.createXHR(),this.host=t||"",this.service=e||"",this.params=i||{},this.options=s.assign({},a.defaultOptions,n),this.retries=0,this.options.cache||this.setParam("timemark",(new Date).getTime())},createXHR:function(){try{return XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return r.error(t),{}}},getXHR:function(){return this.xhr},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(t,e){return this.xhr.addEventListener(t,e.bind(this,this)),this},off:function(t,e){return this.xhr.removeEventListener(t,e),this},getParamString:function(){try{var t="?";for(var e in this.params){var i=this.params[e];if(null!==i&&"object"==typeof i){var n=JSON.stringify(i);"{}"!==n&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(n)+"&")}else null!==i&&void 0!==i&&""!==i&&(t+=encodeURIComponent(e)+"="+encodeURIComponent(i)+"&")}return t.slice(0,-1)}catch(t){return r.error(t),""}},getParam:function(t){return this.params[t]},setParam:function(t,e){return this.params[t]=e,this},send:function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var t in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(t)&&this.xhr.setRequestHeader(t,this.options.requestHeaders[t]);if(this.options.retryAfter>0&&this.options.maxRetries>0){var e=function(){this.retries>=this.options.maxRetries?r.error('Aborting failed request "'+this.service+'". Max retries reached.'):(r.warn('YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms."),setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter))};0===this.retries&&this.on(a.Event.ERROR,e.bind(this))}r.logLevel<=r.Level.VERBOSE&&r.verbose("XHR Req: "+this.getUrl());for(var i in a._globalListeners)a._globalListeners[i].forEach(function(t){this.on(i,t)}.bind(this));return this.xhr.send()}catch(t){r.error(t)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(t,e){a._globalListeners[t]=a._globalListeners[t]||[],a._globalListeners[t].push(e)},offEvery:function(t,e){if(a._globalListeners[t]){var i=a._globalListeners[t].indexOf(e);-1!==i&&a._globalListeners[t].splice(i,1)}}});t.exports=a},function(t,e,i){var n=i(4),r=n.extend({constructor:function(){this._isBusy=!0},parse:function(t){},isBlocking:function(t){return this._isBusy},done:function(){this._isBusy=!1,this.emit(r.Event.DONE)}},{Event:{DONE:"done"}});t.exports=r},function(t,e,i){var n=i(1),r=n.extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(t){var e=(new Date).getTime();if(this.startTime){t&&!this.stopTime&&(this.stopTime=e);var i=this.pausetime?e-this.pausetime:0,n=this.stopTime?this.stopTime:e;return this.offset-i+(n-this.startTime)}return-1},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pausetime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var t=new r;return t.startTime=this.startTime,t.stopTime=this.stopTime,t.offset=this.offset,t}});t.exports=r},function(t,e,i){t.exports=i(31).version},function(e,i){e.exports=t},function(t,e,i){var n=r,r={};r.noConflict=function(){return r=n,this},r.VERSION=i(8),r.polyfills=i(32),r.Object=i(1),r.Emitter=i(4),r.Log=i(0),r.Log.loadLevelFromUrl(),r.Util=i(2),r.HybridNetwork=i(17),r.Chrono=i(7),r.Timer=i(12),r.Constants=i(3),r.Request=i(5),r.Communication=i(13),r.Transform=i(6),r.ViewTransform=i(18),r.Nqs6Transform=i(34),r.ResourceTransform=i(19),r.CdnParser=i(21),r.HlsParser=i(20),r.LocationheaderParser=i(22),r.Options=i(23),r.Plugin=i(41),r.Storage=i(24),r.RequestBuilder=i(25),r.PlayheadMonitor=i(28),r.Adapter=i(15),r.adapters={},r.Infinity=i(14),r.BackgroundDetector=i(26),r.DeviceDetector=i(27),r.registerAdapter=function(t,e){this.adapters[t]=e}.bind(r),r.unregisterAdapter=function(t){this.adapters[t]=null}.bind(r),t.exports=r},function(t,e){t.exports=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){var n=i(1),r=i(7),s=n.extend({constructor:function(t,e){this.callback=t,this.interval=e||5e3,this.isRunning=!1,this._timer=null,this.chrono=new r},start:function(){this.isRunning=!0,this._setTick()},stop:function(){this.isRunning=!1,this._timer&&clearTimeout(this._timer)},_setTick:function(){this.chrono.start(),this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}});t.exports=s},function(t,e,i){var n=i(1),r=i(0),s=i(5),a=i(6),o=n.extend({constructor:function(){this.transforms=[],this._requests=[]},sendRequest:function(t,e){t&&("function"==typeof e&&t.on(s.Event.SUCCESS,e),this._registerRequest(t))},buildRequest:function(t,e,i,n){i=i||{};var r=new s(t,e,i);"function"==typeof n&&r.on(s.Event.SUCCESS,n),this._registerRequest(r)},addTransform:function(t){t.parse&&t.isBlocking?(this.transforms.push(t),t.on(a.Event.DONE,this._processRequests.bind(this))):r.warn(t+" is not a valid RequestTransform.")},removeTransform:function(t){var e=this.transforms.indexOf(t);-1!==e?this.transforms.splice(e,1):r.warn("Trying to remove unexisting Transform '"+t+"'.")},_registerRequest:function(t){this._requests.push(t),this._processRequests()},_processRequests:function(){var t=this._requests;this._requests=[];for(var e=[];t.length;){var i=t.shift();this._transform(i)?i.send():e.push(i)}for(;e.length;)this._requests.push(e.shift())},_transform:function(t){var e=!0;return this.transforms.forEach(function(i){if(i.isBlocking(t))return void(e=!1);i.parse(t)}),e}});t.exports=o},function(t,e,i){var n=i(4),r=i(13),s=n.extend({constructor:function(t){this._plugin=t},andBeyond:function(){s.prototype.begin.apply(this,arguments)},begin:function(t){this._comm=new r,this._comm.addTransform(this._plugin.viewTransform),this._plugin.getContext()?this.fireNav(t):this.fireSessionStart(t)},_generateNewContext:function(){var t=btoa((new Date).getTime());this._plugin.storage.setSession("context",t)},_setLastActive:function(){this._plugin.storage.setSession("lastactive",(new Date).getTime())},getComm:function(){return this._comm},fireSessionStart:function(t){this._generateNewContext(),this.emit(s.Event.SESSION_START,{params:t}),this._setLastActive()},fireSessionStop:function(t){this.emit(s.Event.SESSION_STOP,{params:t}),this._setLastActive()},fireNav:function(t){this.emit(s.Event.NAV,{params:t}),this._setLastActive()},fireEvent:function(t){this.emit(s.Event.EVENT,{params:t}),this._setLastActive()}},{Event:{NAV:"nav",SESSION_START:"sessionStart",SESSION_STOP:"sessionStop",BEAT:"beat",EVENT:"event"}});t.exports=s},function(t,e,i){var n=i(4),r=i(0),s=i(2),a=i(17),o=i(8),d=i(44),u=i(45),h=i(28),c=n.extend({constructor:function(t){this.flags=new u,this.chronos=new d,this.monitor=null,this.plugin=null,this.player=null,this.setPlayer(t),this.tag=this.player,r.notice("Adapter "+this.getVersion()+" with Lib "+o+" is ready.")},setPlayer:function(t){this.player&&this.unregisterListeners(),this.player="string"==typeof t?document.getElementById(t):t,this.player&&this.registerListeners()},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){this.monitor&&this.monitor.stop(),this.fireStop(),this.unregisterListeners(),this.player=null,this.tag=null},monitorPlayhead:function(t,e,i){var n=0;t&&(n|=h.Type.BUFFER),e&&(n|=h.Type.SEEK),this.monitor=new h(this,n,i)},getPlayhead:function(){return null},getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getThroughput:function(){if(this.getCdnTraffic()&&0!==this.getCdnTraffic()){this.lastDataValue||(this.lastDataValue=0);var t=this.lastDataValue;return this.lastDataValue=this.getCdnTraffic()+this.getP2PTraffic(),Math.round((this.lastDataValue-t)/(this.plugin._ping.interval/1e3))}return null},getRendition:function(){return null},getTitle:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return o+"-generic-js"},getPosition:function(){return null},getCdnTraffic:function(){return a.getCdnTraffic()},getP2PTraffic:function(){return a.getP2PTraffic()},getUploadTraffic:function(){return a.getUploadTraffic()},getIsP2PEnabled:function(){return a.getIsP2PEnabled()},getHouseholdId:function(){return null},getLatency:function(){return null},getPacketLoss:function(){return null},getPacketSent:function(){return null},fireInit:function(t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start(),this.emit(c.Event.INIT,{params:t}),this.flags.isInited=!0)},fireStart:function(t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||(this.flags.isStarted=!0,this.flags.isInited||(this.chronos.total.start(),this.chronos.join.start()),this.emit(c.Event.START,{params:t}),this.flags.isInited=!1)},fireJoin:function(t){!this.flags.isStarted&&!this.flags.isInited||this.flags.isJoined||(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),this.emit(c.Event.JOIN,{params:t}))},firePause:function(t){this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),this.emit(c.Event.PAUSE,{params:t}))},fireResume:function(t){this.flags.isJoined&&this.flags.isPaused&&(this.flags.isPaused=!1,this.chronos.pause.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(c.Event.RESUME,{params:t}))},fireBufferBegin:function(t,e){if(this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!e)return;r.notice("Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();this.flags.isBuffering=!0,this.emit(c.Event.BUFFER_BEGIN,{params:t})}},fireBufferEnd:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(c.Event.BUFFER_END,{params:t}))},cancelBuffer:function(t){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},fireSeekBegin:function(t,e){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===e)return;r.notice("Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();this.flags.isSeeking=!0,this.emit(c.Event.SEEK_BEGIN,{params:t})}},fireSeekEnd:function(t){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick(),this.emit(c.Event.SEEK_END,{params:t}))},cancelSeek:function(t){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireStop:function(t){this.flags.isStarted&&(this.monitor&&this.monitor.stop(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),this.emit(c.Event.STOP,{params:t}),this.plugin._adapter&&this.plugin._adapter.flags.isEnded&&!this.plugin._adapter.flags.isStopped&&(0===this.plugin.options["ad.afterStop"]?this.plugin.fireStop():this.plugin.options["ad.afterStop"]--),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset())},fireCasted:function(t){t||(t={}),t.casted=!0,this.fireStop(t)},fireError:function(t,e,i,n){var r=s.buildErrorParams(t,e,i,n);this.emit(c.Event.ERROR,{params:r})},fireNoServedAd:function(t,e,i,n){var r=s.buildErrorParams(t,e,i,n);r.errorSeverity="AdsNotServed",this.emit(c.Event.ERROR,{params:r})},fireFatalError:function(t,e,i){this.monitor&&this.monitor.stop(),this.fireError(t,e,i,"fatal"),this.fireStop()},fireClick:function(t){this.emit(c.Event.CLICK,{params:t})},fireBlocked:function(t){this.emit(c.Event.BLOCKED,{params:t})}},{Event:{START:"start",JOIN:"join",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",BLOCKED:"blocked"}});t.exports=c},function(t,e){t.exports=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}},function(t,e){var i={getCdnTraffic:function(){if("undefined"!=typeof Streamroot&&Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(agent in Streamroot.peerAgents)t+=Streamroot.peerAgents[agent].stats.cdn;return t}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalHttpDownloaded:null},getP2PTraffic:function(){if("undefined"!=typeof Streamroot&&Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(agent in Streamroot.peerAgents)Streamroot.peerAgents[agent].isP2PEnabled&&(t+=Streamroot.peerAgents[agent].stats.p2p);return t}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PDownloaded:null},getUploadTraffic:function(){if("undefined"!=typeof Streamroot&&Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=0;for(agent in Streamroot.peerAgents)Streamroot.peerAgents[agent].isP2PEnabled&&(t+=Streamroot.peerAgents[agent].stats.upload);return t}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PUploaded:null},getIsP2PEnabled:function(){if("undefined"!=typeof Streamroot&&Streamroot.p2pAvailable&&Streamroot.peerAgents){var t=!1;for(agent in Streamroot.peerAgents)t=t||Streamroot.peerAgents[agent].isP2PEnabled;return t}return"undefined"!=typeof peer5&&peer5.isEnabled?peer5.isEnabled():null}};t.exports=i},function(t,e,i){var n=i(5),r=i(6),s=i(0),a=i(2),o=i(3),d=r.extend({constructor:function(t,e){r.prototype.constructor.apply(this,arguments),this.response={},this._viewIndex=-1,this._session=e,this._httpSecure=t.options.httpSecure,this._plugin=t},init:function(){var t=o.Service.DATA,e={apiVersion:"v7",outputformat:"json"};null!==(e=this._plugin.requestBuilder.buildParams(e,t))&&(s.notice(t+" "+e.system),"nicetest"===e.system&&s.error("No accountCode has been set. Please set your accountCode inside plugin's options."),new n(this._plugin.getHost(),t,e).on(n.Event.SUCCESS,this._receiveData.bind(this)).on(n.Event.ERROR,this._failedData.bind(this)).send())},setData:function(t){try{var e=JSON.parse(t);this.response.msg=t,this.response.host=a.addProtocol(e.q.h,this._httpSecure),this.response.code=e.q.c,this.response.pingTime=e.q.pt||5,this.response.beatTime=e.q.bt||30,this.done()}catch(t){s.error("Fastdata response is invalid.")}},_receiveData:function(t,e){var i=t.getXHR().response;this.setData(i)},_failedData:function(t,e){s.error("Fastdata request has failed.")},nextView:function(){return this._viewIndex+=1,this.getViewCode()},getViewCode:function(){return this.response.code+"_"+this._viewIndex},getSessionId:function(){return this._session},setSessionId:function(t){this._session=t},parse:function(t){t.host=t.host||this.response.host,t.params.sessionId=t.params.sessionId||this.getSessionId(),t.service!==o.Service.PING&&t.service!==o.Service.START||(t.params.pingTime=t.params.pingTime||this.response.pingTime),-1===[o.Service.NAV,o.Service.SESSION_START,o.Service.SESSION_STOP,o.Service.EVENT].indexOf(t.service)&&(t.params.code=t.params.code||this.getViewCode())}});t.exports=d},function(t,e,i){var n=i(6),r=i(20),s=i(21),a=i(22),o=i(0),d=i(3),u=n.extend({constructor:function(t){u.__super__.constructor.apply(this,arguments),this.isDone=!1,this._plugin=t,this._realResource=null,this._initResource=null,this._cdnName=null,this._cdnNodeHost=null,this._cdnNodeTypeString=null,this._cdnNodeType=null,this._responses={},this._isBusy=!1},getResource:function(){return this._plugin&&this._plugin.options&&this._plugin.options["content.resource"]?this._plugin.options["content.resource"]:this._realResource||this._initResource},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(t){this._isBusy||this.isDone||(this._isBusy=!0,this._initResource=t,this._hlsEnabled=this._plugin.isParseHls(),this._cdnEnabled=this._plugin.isParseCdnNode(),this._locHeaderEnabled=this._plugin.isLocHeader(),this._cdnList=this._plugin.getParseCdnNodeList().slice(),this._cdnNameHeader=this._plugin.getParseCdnNodeNameHeader(),s.setBalancerHeaderName(this._cdnNameHeader),this._setTimeout(),this._locHeaderEnabled&&this._parseLocHeader(),this._hlsEnabled?this._parseHLS():this._cdnEnabled?this._parseCDN():this.done())},done:function(){this.isDone=!1,n.prototype.done.apply(this,arguments)},_setTimeout:function(){this._parseTimeout=setTimeout(function(){this._isBusy&&(this.done(),o.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this),3e3)},_parseLocHeader:function(){var t=new a;t.parse(this._initResource),t.on(a.Event.DONE,function(){this._realResource=t.getResource(),this.done()}.bind(this))},_parseHLS:function(){var t=new r;t.on(r.Event.DONE,function(){this._realResource=t.getResource(),this._cdnEnabled?this._parseCDN():this.done()}.bind(this)),t.parse(this._initResource)},_parseCDN:function(){if(this._cdnList.length>0){var t=this._cdnList.shift();if(this.getNodeHost())return;var e=s.create(t);e?(e.on(s.Event.DONE,function(){this._responses=e.getResponses(),this._cdnName=e.getParsedCdnName(),this._cdnNodeHost=e.getParsedNodeHost(),this._cdnNodeTypeString=e.getParsedNodeTypeString(),this._cdnNodeType=e.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()}.bind(this)),e.parse(this.getResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(t){if(t.service===d.Service.START){var e=this._plugin.requestBuilder.lastSent;e.mediaResource=t.params.mediaResource=this.getResource(),this._cdnEnabled&&(e.cdn=t.params.cdn=t.params.cdn||this.getCdnName(),e.nodeHost=t.params.nodeHost=this.getNodeHost(),e.nodeType=t.params.nodeType=this.getNodeType(),e.nodeTypeString=t.params.nodeTypeString=this.getNodeTypeString())}}});t.exports=u},function(t,e,i){var n=i(5),r=i(4),s=i(0),a=r.extend({constructor:function(){this._realResource=null},done:function(){this.emit(a.Event.DONE)},parse:function(t,e){e=e||"";try{var i=/((\S*?)(\.m3u8|\.m3u|\.ts|\.mp4)((\?|\;)\S*|\n|\r|$))/i.exec(t)}catch(t){s.warn("Parse HLS Regex failed",t),this.done()}if(null!==i){var r=i[1].trim(),a=e.lastIndexOf("/");if(0!==r.indexOf("http")&&-1!==a&&(r=e.slice(0,a)+"/"+r),".m3u8"===i[3]||".m3u"===i[3]){var o=new n(r,null,null,{cache:!0});o.on(n.Event.SUCCESS,function(t){this.parse(t.getXHR().responseText,i[2])}.bind(this)),o.on(n.Event.ERROR,function(t){this.done()}.bind(this)),o.send()}else this._realResource=r,this.done()}else this.done()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=a},function(t,e,i){var n=i(4),r=i(0),s=i(2),a=i(5),o=n.extend({constructor:function(t){this._options=s.assign({cdnName:null,parsers:[],requestHeaders:{},parseType:function(){return 0}},t),this._responses={}},done:function(){this.emit(o.Event.DONE)},addParser:function(t){return this._options.parsers.push(t),this},setCdnName:function(t){return this._options.cdnName=t,this},setRequestHeader:function(t,e){return this._options.requestHeaders[t]=e,this},setParseType:function(t){return this._options.parseType=t,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(t,e){this._responses=e||{};var i=JSON.stringify(this._options.requestHeaders);this._responses[i]?this._parseResponse(this._responses[i]):this._requestResponse(t)},_requestResponse:function(t){var e=JSON.stringify(this._options.requestHeaders),i=new a(t,null,null,{method:"HEAD",maxRetries:0,requestHeaders:this._options.requestHeaders});i.on(a.Event.SUCCESS,function(t){this._responses[e]=t.getXHR().getAllResponseHeaders(),this._parseResponse(this._responses[e])}.bind(this)),i.on(a.Event.ERROR,function(t){this.done()}.bind(this)),i.send()},_parseResponse:function(t){this._options.parsers.forEach(function(e){t.split("\n").forEach(function(t){var i=t.indexOf(":");if(-1!==i){t.slice(0,i)===e.headerName&&this._executeParser(e,t.slice(i+1))}}.bind(this))}.bind(this)),this.done()},_executeParser:function(t,e){try{var i=t.regex.exec(e.trim());if(null!==i)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),t.element){case o.ElementType.HOST:this._cdnNodeHost=i[1];break;case o.ElementType.TYPE:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.HOST_AND_TYPE:this._cdnNodeHost=i[1],this._cdnNodeTypeString=i[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case o.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=i[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=i[2];break;case o.ElementType.NAME:this._cdnName=i[1].toUpperCase()}}catch(t){r.warn("CDN parsing for "+this._options.cdnName+" could not parse header value "+e)}}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(t){o._cdnConfigs.Balancer.parsers[0].headerName=t},create:function(t){if(o._cdnConfigs[t])return new o(o._cdnConfigs[t]);r.warn("Tried to create an unexisting CdnParser named "+t)},add:function(t,e){o._cdnConfigs[t]=e}});o.add("Level3",i(35)),o.add("Cloudfront",i(36)),o.add("Akamai",i(37)),o.add("Highwinds",i(38)),o.add("Fastly",i(39)),o.add("Balancer",i(40)),t.exports=o},function(t,e,i){var n=i(4),r=(i(0),i(2),i(5)),s=n.extend({constructor:function(){this._realResource=null},done:function(){this.emit(s.Event.DONE)},parse:function(t){var e=new r(t,null,null,{method:"HEAD",maxRetries:0,requestHeaders:{}});e.on(r.Event.SUCCESS,function(t){this._response=t.getXHR().getAllResponseHeaders(),this._parseResponse(this._response)}.bind(this)),e.on(r.Event.ERROR,function(t){this.done()}.bind(this)),e.send()},_parseResponse:function(t){t.split("\n").forEach(function(t){t.startsWith("Location:")&&(this._realResource=t.slice(10))}.bind(this)),this.done()},getResource:function(){return this._realResource}},{Event:{DONE:"done"}});t.exports=s},function(t,e,i){var n=i(1),r=n.extend({constructor:function(t){this.enabled=!0,this.httpSecure=null,this.host="nqs.nice264.com",this.accountCode="nicetest",this.username=null,this.obfuscateIp=!1,this.userType=null,this.referer=null,this.experiments=[],this["parse.hls"]=!1,this["parse.cdnNameHeader"]="x-cdn-forward",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Cloudfront","Level3","Fastly","Highwinds"],this["parse.locationHeader"]=!1,this["network.ip"]=null,this["network.isp"]=null,this["network.connectionType"]=null,this["device.code"]=null,this["content.transactionCode"]=null,this["content.resource"]=null,this["content.isLive"]=null,this["content.isLive.noSeek"]=!1,this["content.title"]=null,this["content.title2"]=null,this["content.duration"]=null,this["content.fps"]=null,this["content.bitrate"]=null,this["content.throughput"]=null,this["content.rendition"]=null,this["content.cdn"]=null,this["content.cdnNode"]=null,this["content.cdnType"]=null,this["content.metadata"]={},this["content.streamingProtocol"]=null,this["ad.metadata"]={},this["ad.campaign"]=null,this["ad.resource"]=null,this["ad.title"]=null,this["ad.ignore"]=!1,this["ad.afterStop"]=0,this["background.enabled"]=!0,this["background.settings"]=null,this["background.settings.android"]="stop",this["background.settings.iphone"]="stop",this["background.settings.desktop"]=null,this["background.settings.tv"]="stop",this["extraparam.1"]=null,this["extraparam.2"]=null,this["extraparam.3"]=null,this["extraparam.4"]=null,this["extraparam.5"]=null,this["extraparam.6"]=null,this["extraparam.7"]=null,this["extraparam.8"]=null,this["extraparam.9"]=null,this["extraparam.10"]=null,this["extraparam.11"]=null,this["extraparam.12"]=null,this["extraparam.13"]=null,this["extraparam.14"]=null,this["extraparam.15"]=null,this["extraparam.16"]=null,this["extraparam.17"]=null,this["extraparam.18"]=null,this["extraparam.19"]=null,this["extraparam.20"]=null,this["ad.extraparam.1"]=null,this["ad.extraparam.2"]=null,this["ad.extraparam.3"]=null,this["ad.extraparam.4"]=null,this["ad.extraparam.5"]=null,this["ad.extraparam.6"]=null,this["ad.extraparam.7"]=null,this["ad.extraparam.8"]=null,this["ad.extraparam.9"]=null,this["ad.extraparam.10"]=null,this["session.expire"]=216e5,this.setOptions(t)},setOptions:function(t,e){if(e=e||this,void 0!==t)for(var i in t)"object"==typeof e[i]&&null!==e[i]?this.setOptions(t[i],e[i]):e[i]=t[i]}});t.exports=r},function(t,e,i){var n=i(1),r=i(0),s=n.extend({setLocal:function(t,e){try{if(localStorage)return localStorage.setItem("youbora."+t,e);r.error("Youbora Infinity needs localStorage which is not supported by your browser.")}catch(t){r.error("Youbora Infinity needs localStorage which is not supported by your browser.")}return null},getLocal:function(t){try{if(localStorage)return localStorage.getItem("youbora."+t);r.error("Youbora Infinity needs localStorage which is not supported by your browser.")}catch(t){r.error("Youbora Infinity needs localStorage which is not supported by your browser.")}return null},setSession:function(t,e){try{if(sessionStorage)return sessionStorage.setItem("youbora."+t,e);r.error("Youbora Infinity needs sessionStorage which is not supported by your browser.")}catch(t){r.error("Youbora Infinity needs sessionStorage which is not supported by your browser.")}return null},getSession:function(t){try{if(sessionStorage)return sessionStorage.getItem("youbora."+t);r.error("Youbora Infinity needs sessionStorage which is not supported by your browser.")}catch(t){r.error("Youbora Infinity needs sessionStorage which is not supported by your browser.")}return null}});t.exports=s},function(t,e,i){var n=i(1),r=i(0),s=["accountCode","username","rendition","player","title","title2","live","mediaDuration","mediaResource","transactionCode","properties","cdn","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","obfuscateIp","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","deviceCode","preloadDuration","referer","userType","streamingProtocol","householdId","experiments"],a=["playhead","adTitle","adPosition","adDuration","adCampaign","adResource","adPlayerVersion","adProperties","adAdapterVersion","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10"],o=n.extend({constructor:function(t){this._plugin=t,this._adNumber=0,this.lastSent={}},fetchParams:function(t,e,i){t=t||{},e=e||[];for(var n=0;n<e.length;n++){var s=e[n];if(!t[s]){var a=o.getters[s];if(this._plugin[a]){var d=this._plugin[a]();null===d||i&&this.lastSent[s]===d||(t[s]=d,this.lastSent[s]=d)}else r.warn("Trying to call undefined getter "+s+":"+a)}}return t},buildParams:function(t,e){return t=t||{},this.fetchParams(t,o.params[e],!1),this.fetchParams(t,o.differentParams[e],!0),t},getNewAdNumber:function(){var t=this.lastSent.adNumber;return t&&this.lastSent.adPosition===this._plugin.getAdPosition()?t+=1:t=1,this.lastSent.adNumber=t,t},getChangedEntities:function(){return this.fetchParams({},o.differentParams.entities,!0)}},{params:{"/data":["system","pluginVersion","requestNumber"],"/init":s,"/start":s,"/joinTime":["joinDuration","playhead","mediaDuration"],"/pause":["playhead"],"/resume":["pauseDuration","playhead"],"/seek":["seekDuration","playhead"],"/bufferUnderrun":["bufferDuration","playhead"],"/error":["player"].concat(s),"/stop":["bitrate","playhead","pauseDuration"],"/adInit":a,"/adStart":a,"/adJoin":["playhead","adPosition","adJoinDuration","adPlayhead"],"/adPause":["playhead","adPosition","adPlayhead"],"/adResume":["playhead","adPosition","adPlayhead","adPauseDuration"],"/adBufferUnderrun":["playhead","adPosition","adPlayhead","adBufferDuration"],"/adStop":["playhead","adPosition","adPlayhead","adBitrate","adTotalDuration","pauseDuration"],"/adClick":["playhead","adPosition","adPlayhead"],"/adError":a,"/adBlocked":a,"/ping":["droppedFrames","playrate","cdnDownloadedTraffic","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent"],"/infinity/session/start":["accountCode","username","navContext","route","page"],"/infinity/session/stop":[],"/infinity/session/nav":["navContext","username","route","page"],"/infinity/session/beat":[],"/infinity/event":["accountCode"]},differentParams:{"/join":["title","title2","live","mediaDuration","mediaResource"],"/adJoin":["adTitle","adDuration","adResource"],entities:["rendition","title","title2","live","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","connectionType","deviceCode","ip","username","cdn","nodeHost","nodeType","nodeTypeString"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",pluginVersion:"getPluginVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",obfuscateIp:"getObfuscateIp",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",adPosition:"getAdPosition",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceCode:"getDeviceCode",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",preloadDuration:"getPreloadDuration",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",sessionId:"getSessionId",navContext:"getContext",page:"getPageName",cdnDownloadedTraffic:"getCdnTraffic",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",experiments:"getExperiments"}});t.exports=o},function(t,e,i){var n=i(1),r=n.extend({constructor:function(t){this.plugin=t,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(t){this.isBackgroundDetectorStarted?t!=this.windowObject&&(this.stopDetection(),this.isBackgroundDetectorStarted=!1,this.startDetection(t)):(t&&(this.windowObject=t),this.windowObject&&this.windowObject.document&&(this.isBackgroundDetectorStarted=!0,this.windowObject.document.addEventListener("visibilitychange",this.listenerReference)))},stopDetection:function(){this.isBackgroundDetectorStarted&&(this.windowObject.document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1,this.windowObject="undefined"!=typeof window?window:void 0},_visibilityListener:function(t){if("hidden"===this.windowObject.document.visibilityState){this.isInBackground=!0;var e=this._getSettings();if("string"==typeof e)switch(e){case"stop":this._fireStop();break;case"pause":this._firePause()}}else"visible"===this.windowObject.document.visibilityState&&(this.isInBackground=!1)},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iphone"]:void 0},_firePause:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded?this.adsAdapter.firePause():this.contentAdapter&&this.contentAdapter.flags.isStarted&&!this.contentAdapter.flags.isEnded&&this.contentAdapter.firePause()},_fireStop:function(){this.adsAdapter=this.plugin.getAdsAdapter(),this.contentAdapter=this.plugin.getAdapter(),this.adsAdapter&&this.adsAdapter.flags.isStarted&&!this.adsAdapter.flags.isEnded&&this.adsAdapter.fireStop(),this.contentAdapter?this.contentAdapter.fireStop({end:!0}):this.plugin.fireStop({end:!0})},canBlockStartCalls:function(){return this.plugin.backgroundDetector.isInBackground&&!0===this.plugin.options["background.enabled"]&&this.plugin.backgroundDetector._getSettings()}});t.exports=r},function(t,e,i){var n=i(1),r=n.extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTV=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTV&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTV)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTV}});t.exports=r},function(t,e,i){var n=i(1),r=i(12),s=i(7),a=n.extend({constructor:function(t,e,i){this._adapter=t,this._seekEnabled=e&a.Type.SEEK,this._bufferEnabled=e&a.Type.BUFFER,i=i||800,this._chrono=new s,this._lastPlayhead=0,i>0&&(this._timer=new r(this.progress.bind(this),i))},start:function(){this._timer.start()},stop:function(){this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var t=this._chrono.stop();this._chrono.start();var e=t*a.kBUFFER_THRESHOLD_RATIO,i=t*a.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!=this._adapter.getPlayrate()&&(e*=this._adapter.getPlayrate(),i*=this._adapter.getPlayrate());var n=this._getPlayhead(),r=1e3*Math.abs(this._lastPlayhead-n);r<e?this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking&&this._adapter.fireBufferBegin(null,!1):r>i?this._seekEnabled&&this._lastPlayhead>0&&this._adapter.fireSeekBegin(null,!1):(this._seekEnabled&&this._adapter.fireSeekEnd(),this._bufferEnabled&&this._adapter.fireBufferEnd()),this._lastPlayhead=n},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2});t.exports=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAME=e.VERSION=void 0;var n=i(9),r=i(30),s=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=s.default,e.VERSION="0.3.3",e.NAME="playkit-js-youbora";(0,n.registerPlugin)("youbora",s.default)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(n)},d=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(9),h=i(10),c=n(h),p=i(54),l=n(p),f=function(t){function e(t,i,n){r(this,e);var a=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n));return a._youbora=new c.default.Plugin(a.config.options),a._youbora.setAdapter(new l.default(i,n)),a._addBindings(),a._setup(),a}return a(e,t),d(e,null,[{key:"isValid",value:function(){return!0}}]),d(e,[{key:"updateConfig",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateConfig",this).call(this,t),this._youbora.setOptions(t.options),this._youbora.getAdapter()&&(this._youbora.getAdapter().config=t),this._addPlayerMetadata()}},{key:"reset",value:function(){}},{key:"_addPlayerMetadata",value:function(){this._youbora.setOptions({properties:{kalturaInfo:{entryId:this.config.entryId,sessionId:this.config.sessionId,uiConfId:this.config.uiConfId}}})}},{key:"_addBindings",value:function(){this._youbora.getAdapter().bindLogger(this.logger)}},{key:"_setup",value:function(){}},{key:"destroy",value:function(){}}]),e}(u.BasePlugin);f.defaultConfig={options:{}},e.default=f},function(t,e){t.exports={name:"youboralib",type:"lib",tech:"js",author:"Jordi Aguilar",version:"6.2.3",built:"2018-05-02",repo:"https://bitbucket.org/npaw/lib-plugin-js.git"}},function(t,e){var i=function(){Function.prototype.bind=Function.prototype.bind||function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice,i=e.call(arguments,1),n=this,r=function(){},s=function(){return n.apply(this instanceof r?this:t||window,i.concat(e.call(arguments)))};return r.prototype=this.prototype,s.prototype=new r,s},Array.prototype.forEach=Array.prototype.forEach||function(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function!");for(var i=this.length,n=0;n<i;n++)t.call(e,this[n],n,this)}};t.exports=i},function(t,e){var i=function(){};t.exports=function(t){if(arguments.length>1)throw Error("Second argument not supported");if(null===t)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof t)throw TypeError("Argument must be an object");return i.prototype=t,new i}},function(t,e,i){var n=i(6),r=i(3),s=n.extend({constructor:function(){this.done()},parse:function(t){switch(this._cloneParam(t,"accountCode","system"),this._cloneParam(t,"transactionCode","transcode"),this._cloneParam(t,"username","user"),this._cloneParam(t,"mediaResource","resource"),this._cloneParam(t,"msg","msg"),t.service!==r.Service.JOIN&&this._cloneParam(t,"playhead","time"),t.service){case r.Service.START:this._cloneParam(t,"mediaDuration","duration");break;case r.Service.JOIN:this._cloneParam(t,"joinDuration","time"),this._cloneParam(t,"playhead","eventTime");break;case r.Service.SEEK:this._cloneParam(t,"seekDuration","duration");break;case r.Service.BUFFER:this._cloneParam(t,"bufferDuration","duration");break;case r.Service.PING:for(var e in t.params.entities){t.params.entityType=e,t.params.entityValue=t.params.entities[e];break}}},_cloneParam:function(t,e,i){t.params[i]=t.params[e]}});t.exports=s},function(t,e){t.exports={cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(t){if(t){if(0===t.indexOf("TCP_HIT")||0===t.indexOf("TCP_MEM_HIT")||0===t.indexOf("TCP_IMS_HIT"))return 1;if(0===t.indexOf("TCP_MISS"))return 2}return 0}}},function(t,e){t.exports={cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(t){switch(t){case"Hit":return 1;case"Miss":return 2;default:return 0}}}},function(t,e){t.exports={cdnName:"AKAMAI",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom\s.+\(.+\/(.+)\).*/}],parseType:function(t){switch(t){case"TCP_HIT":return 1;case"TCP_MISS":return 2;default:return 0}}}},function(t,e){t.exports={cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(t){switch(t){case"c":case"x":return 1;default:return 2}}}},function(t,e){t.exports={cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(t){switch(t){case"HIT":return 1;case"MISS":return 2;default:return 0}}}},function(t,e){t.exports={parsers:[{element:"name",headerName:null,regex:/(.+)/}]}},function(t,e,i){var n=i(4),r=i(12),s=i(7),a=i(3),o=i(2),d=i(5),u=i(13),h=i(42),c=i(18),p=i(19),l=i(23),f=i(24),g=i(25),_=i(14),m=i(26),S=i(27),v=n.extend({constructor:function(t,e){this.infinity=new _(this),this.isInitiated=!1,this.isPreloading=!1,this.preloadChrono=new s,this.initChrono=new s,this.storage=new f,this.options=new l(t),this._adapter=null,this._adsAdapter=null,this._ping=new r(this._sendPing.bind(this),5e3),this._beat=new r(this._sendBeat.bind(this),3e4),this.requestBuilder=new g(this),this.resourceTransform=new p(this),this.lastEventTime=null,e&&this.setAdapter(e),this.viewTransform=new c(this),this.viewTransform.on(c.Event.DONE,this._receiveData.bind(this)),this.getIsDataExpired()?this.viewTransform.init():this.viewTransform.setData(this.getStoredData()),this._initInfinity(),this.deviceDetector=new S,this.backgroundDetector=new m(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection()},_receiveData:function(t){this._ping.interval=1e3*t.target.response.pingTime,this._beat.interval=1e3*t.target.response.beatTime,this.storage.setSession("data",t.target.response.msg),this.getIsSessionExpired()?(this.viewTransform.setSessionId(this.viewTransform.response.code),this.storage.setLocal("session",this.viewTransform.response.code)):this.viewTransform.setSessionId(this.getSessionId())},_reset:function(){this._stopPings(),this.resourceTransform=new p(this),this.isInitiated=!1,this.isStarted=!1,this.isPreloading=!1,this.preloadChrono.reset(),this.initChrono.reset()},_send:function(t,e,i){var n=(new Date).getTime();this.lastEventTime&&n>this.lastEventTime+6e5&&this.viewTransform.nextView(),this.lastEventTime=n,e===a.Service.STOP&&(this.lastEventTime=null),i=this.requestBuilder.buildParams(i,e),this.getIsLive()&&(i.mediaDuration=void 0,i.playhead=void 0);var r={params:i,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(t,r),this._comm&&null!==i&&this.options.enabled&&(this.lastServeiceSent=e,this._comm.sendRequest(new d(null,e,i)))},_initComm:function(){this.resourceTransform.init(this.getResource()),this._comm=new u,this._comm.addTransform(new h),this._comm.addTransform(this.viewTransform),this._comm.addTransform(this.resourceTransform)},getComm:function(){return this._comm},setOptions:function(t){this.options.setOptions(t),"boolean"==typeof t["background.enabled"]&&(t["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection())},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})}},{Event:a.WillSendEvent});o.assign(v.prototype,i(43)),o.assign(v.prototype,i(46)),o.assign(v.prototype,i(47)),o.assign(v.prototype,i(48)),o.assign(v.prototype,i(49)),o.assign(v.prototype,i(50)),o.assign(v.prototype,i(51)),o.assign(v.prototype,i(52)),o.assign(v.prototype,i(53)),t.exports=v},function(t,e,i){var n=i(6),r=i(3),s=n.extend({_services:[r.Service.INIT,r.Service.START],isBlocking:function(t){if(this._isBusy&&null!=t)if(-1!==this._services.indexOf(t.service))this.done();else if(t.service===r.Service.ERROR)return!1;return n.prototype.isBlocking.apply(this,arguments)}});t.exports=s},function(t,e,i){var n=i(0),r=i(3),s=i(15),a={setAdapter:function(t){t.plugin?n.warn("Adapters can only be added to a single plugin"):(this.removeAdapter(),this._adapter=t,t.plugin=this,t.on(s.Event.INIT,this._initListener.bind(this)),t.on(s.Event.START,this._startListener.bind(this)),t.on(s.Event.JOIN,this._joinListener.bind(this)),t.on(s.Event.PAUSE,this._pauseListener.bind(this)),t.on(s.Event.RESUME,this._resumeListener.bind(this)),t.on(s.Event.SEEK_BEGIN,this._seekBeginListener.bind(this)),t.on(s.Event.SEEK_END,this._seekEndListener.bind(this)),t.on(s.Event.BUFFER_BEGIN,this._bufferBeginListener.bind(this)),t.on(s.Event.BUFFER_END,this._bufferEndListener.bind(this)),t.on(s.Event.ERROR,this._errorListener.bind(this)),t.on(s.Event.STOP,this._stopListener.bind(this)),t.on(s.Event.CLICK,this._clickListener.bind(this)),t.on(s.Event.BLOCKED,this._blockedListener.bind(this)))},getAdapter:function(){return this._adapter},removeAdapter:function(){this._adapter&&(this._adapter.dispose(),this._adapter.plugin=null,this._adapter.off(s.Event.INIT,this._initListener),this._adapter.off(s.Event.START,this._startListener),this._adapter.off(s.Event.JOIN,this._joinListener),this._adapter.off(s.Event.PAUSE,this._pauseListener),this._adapter.off(s.Event.RESUME,this._resumeListener),this._adapter.off(s.Event.SEEK_BEGIN,this._seekBeginListener),this._adapter.off(s.Event.SEEK_END,this._seekEndListener),this._adapter.off(s.Event.BUFFER_BEGIN,this._bufferBeginListener),this._adapter.off(s.Event.BUFFER_END,this._bufferEndListener),this._adapter.off(s.Event.ERROR,this._errorListener),this._adapter.off(s.Event.STOP,this._stopListener),this._adapter=null)},_initListener:function(t){if(!this._adapter||!this._adapter.flags.isInited){this.isInitiated&&this.lastServeiceSent!==r.Service.ERROR||(this.viewTransform.nextView(),this._initComm(),this._startPings());var e=t.data.params||{};this.isInitiated=!0,this._adapter?(this._adapter.flags.isInited=!0,this._adapter.chronos.join.start()):this.initChrono.start(),this._send(r.WillSendEvent.WILL_SEND_INIT,r.Service.INIT,e),n.notice(r.Service.INIT+" "+(e.title||e.mediaResource))}},_startListener:function(t){this.isInitiated||(this.viewTransform.nextView(),this._initComm(),this._startPings());var e=t.data.params||{};!this.options["content.resource"]&&!this._adapter.getResource()||"boolean"!=typeof this.options["content.isLive"]&&"boolean"!=typeof this._adapter.getIsLive()||"number"!=typeof this.options["content.duration"]&&"number"!=typeof this._adapter.getDuration()&&!this._adapter.getIsLive()&&!this.options["content.isLive"]||!this.options["content.title"]&&!this._adapter.getTitle()||this._adapter.flags.isInited||this.isInitiated?this._adapter.flags.isInited||this.isInitiated||(this.isInitiated=!0,this._adapter.flags.isInited=!0,this._adapter.chronos.join.start(),this._send(r.WillSendEvent.WILL_SEND_START,r.Service.INIT,e),n.notice(r.Service.INIT+" "+(e.title||e.mediaResource))):(this._send(r.WillSendEvent.WILL_SEND_START,r.Service.START,e),n.notice(r.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0,this.isInitiated&&0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime))},_joinListener:function(t){var e=t.data.params||{};this._adsAdapter&&this._adsAdapter.flags.isStarted?(this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0):(this.isInitiated&&!this.isStarted&&(0!=this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime),this._send(r.WillSendEvent.WILL_SEND_START,r.Service.START,e),n.notice(r.Service.START+" "+(e.title||e.mediaResource)),this.isStarted=!0),e=t.data.params||{},this._send(r.WillSendEvent.WILL_SEND_JOIN,r.Service.JOIN,e),n.notice(r.Service.JOIN+" "+e.joinDuration+"ms"))},_pauseListener:function(t){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var e=t.data.params||{};this._send(r.WillSendEvent.WILL_SEND_PAUSE,r.Service.PAUSE,e),n.notice(r.Service.PAUSE+" at "+e.playhead+"s")},_resumeListener:function(t){var e=t.data.params||{};this._send(r.WillSendEvent.WILL_SEND_RESUME,r.Service.RESUME,e),n.notice(r.Service.RESUME+" "+e.pauseDuration+"ms")},_seekBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),n.notice("Seek Begin")},_seekEndListener:function(t){var e=t.data.params||{};this._send(r.WillSendEvent.WILL_SEND_SEEK,r.Service.SEEK,e),n.notice(r.Service.SEEK+" to "+e.playhead+" in "+e.seekDuration+"ms")},_bufferBeginListener:function(t){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),n.notice("Buffer Begin")},_bufferEndListener:function(t){var e=t.data.params||{};this._send(r.WillSendEvent.WILL_SEND_BUFFER,r.Service.BUFFER,e),n.notice(r.Service.BUFFER+" to "+e.playhead+" in "+e.bufferDuration+"ms")},_errorListener:function(t){this.fireError(t.data.params||{})},_stopListener:function(t){this.fireStop(t.data.params||{})},_clickListener:function(t){n.warn("You have sent a CLICK event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.")},_blockedListener:function(t){n.warn("You have sent a BLOCKED event from the content adapter. Such events must be fired from ads adapters, so it will be ignored.")}};t.exports=a},function(t,e,i){var n=i(1),r=i(7),s=n.extend({constructor:function(){this.reset()},reset:function(){this.join=new r,this.seek=new r,this.pause=new r,this.buffer=new r,this.total=new r}});t.exports=s},function(t,e,i){var n=i(1),r=n.extend({constructor:function(){this.reset()},reset:function(){this.isInited=!1,this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isEnded=!1,this.isStopped=!1}});t.exports=r},function(t,e,i){var n=i(2),r=i(8),s={getHost:function(){var t=this.options.host;return this.viewTransform&&this.viewTransform.response&&this.viewTransform.response.host&&(t=this.viewTransform.response.host),n.addProtocol(n.stripProtocol(t),this.options.httpSecure)},getUserType:function(){return this.options.userType},isParseHls:function(){return this.options["parse.hls"]},isParseCdnNode:function(){return this.options["parse.cdnNode"]},isLocHeader:function(){return this.options["parse.locationHeader"]},getParseCdnNodeList:function(){return this.options["parse.cdnNode.list"]},getParseCdnNodeNameHeader:function(){return this.options["parse.cdnNameHeader"]},getObfuscateIp:function(){return this.options.obfuscateIp},getExtraparam1:function(){return this.options["extraparam.1"]},getExtraparam2:function(){return this.options["extraparam.2"]},getExtraparam3:function(){return this.options["extraparam.3"]},getExtraparam4:function(){return this.options["extraparam.4"]},getExtraparam5:function(){return this.options["extraparam.5"]},getExtraparam6:function(){return this.options["extraparam.6"]},getExtraparam7:function(){return this.options["extraparam.7"]},getExtraparam8:function(){return this.options["extraparam.8"]},getExtraparam9:function(){return this.options["extraparam.9"]},getExtraparam10:function(){return this.options["extraparam.10"]},getExtraparam11:function(){return this.options["extraparam.11"]},getExtraparam12:function(){return this.options["extraparam.12"]},getExtraparam13:function(){return this.options["extraparam.13"]},getExtraparam14:function(){return this.options["extraparam.14"]},getExtraparam15:function(){return this.options["extraparam.15"]},getExtraparam16:function(){return this.options["extraparam.16"]},getExtraparam17:function(){return this.options["extraparam.17"]},getExtraparam18:function(){return this.options["extraparam.18"]},getExtraparam19:function(){return this.options["extraparam.19"]},getExtraparam20:function(){return this.options["extraparam.20"]},getAdExtraparam1:function(){return this.options["ad.extraparam.1"]},getAdExtraparam2:function(){return this.options["ad.extraparam.2"]},getAdExtraparam3:function(){return this.options["ad.extraparam.3"]},getAdExtraparam4:function(){return this.options["ad.extraparam.4"]},getAdExtraparam5:function(){return this.options["ad.extraparam.5"]},getAdExtraparam6:function(){return this.options["ad.extraparam.6"]},getAdExtraparam7:function(){return this.options["ad.extraparam.7"]},getAdExtraparam8:function(){return this.options["ad.extraparam.8"]},getAdExtraparam9:function(){return this.options["ad.extraparam.9"]},getAdExtraparam10:function(){return this.options["ad.extraparam.10"]},getPluginInfo:function(){return{lib:r,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()}},getIp:function(){return this.options["network.ip"]},getIsp:function(){return this.options["network.isp"]},getConnectionType:function(){return this.options["network.connectionType"]},getDeviceCode:function(){return this.options["device.code"]},getAccountCode:function(){return this.options.accountCode},getUsername:function(){return this.options.username},getReferer:function(){if(this.options.referer)return this.options.referer;var t="";return"undefined"!=typeof window&&window.location&&(t=window.location.href),t},getNodeHost:function(){return this.options["content.cdnNode"]||this.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getExperiments:function(){return this.options.experiments.length>0?this.options.experiments:null}};t.exports=s},function(t,e,i){var n=i(0),r=i(2),s=i(8),a={getPlayhead:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayhead()}catch(t){n.warn("An error occurred while calling getPlayhead",t)}return r.parseNumber(t,0)},getPlayrate:function(){var t=0;if(this._adapter)try{t=this._adapter.getPlayrate()}catch(t){n.warn("An error occured while calling getPlayrate",t)}return t},getFramesPerSecond:function(){var t=this.options["content.fps"];if(null===t&&this._adapter)try{t=this._adapter.getFramesPerSecond()}catch(t){n.warn("An error occured while calling getFramesPerSecond",t)}return t},getDroppedFrames:function(){var t=null;if(this._adapter)try{t=this._adapter.getDroppedFrames()}catch(t){n.warn("An error occured while calling getDroppedFrames",t)}return t||(t=this.getWebkitDroppedFrames()),r.parseNumber(t,0)},getWebkitDroppedFrames:function(){return this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount?this._adapter.tag.webkitDroppedFrameCount:null},getDuration:function(){var t=this.options["content.duration"];if(null===t&&this._adapter)try{t=this._adapter.getDuration()}catch(t){n.warn("An error occured while calling getDuration",t)}return 0===t&&(t=null),r.parseNumber(Math.round(t),null)},getBitrate:function(){var t=this.options["content.bitrate"];if(null===t&&this._adapter){try{t=this._adapter.getBitrate()}catch(t){n.warn("An error occured while calling getBitrate",t)}t&&-1!==t||(t=this.getWebkitBitrate())}return r.parseNumber(t,-1)},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getThroughput:function(){var t=this.options["content.throughput"];if(null===t&&this._adapter)try{t=this._adapter.getThroughput()}catch(t){n.warn("An error occured while calling getThroughput",t)}return r.parseNumber(t,-1)},getRendition:function(){var t=this.options["content.rendition"];if(null===t&&this._adapter)try{t=this._adapter.getRendition()}catch(t){n.warn("An error occured while calling getRendition",t)}return t},getTitle:function(){var t=this.options["content.title"];if(null===t&&this._adapter)try{t=this._adapter.getTitle()}catch(t){n.warn("An error occured while calling getTitle",t)}return t},getTitle2:function(){var t=this.options["content.title2"];if(null===t&&this._adapter)try{t=this._adapter.getTitle2()}catch(t){n.warn("An error occured while calling getTitle2",t)}return t},getIsLive:function(){var t=this.options["content.isLive"];if(null===t&&this._adapter)try{t=this._adapter.getIsLive()}catch(t){n.warn("An error occured while calling getIsLive",t)}return t||!1},getResource:function(){var t=null;return!this.resourceTransform.isBlocking()&&this.resourceTransform.isDone&&(t=this.resourceTransform.getResource()),t||this.getOriginalResource()},getOriginalResource:function(){var t=null;if(null===(t=this.options["content.resource"])&&this._adapter)try{t=this._adapter.getResource()}catch(e){n.warn("An error occured while calling getResource",e),t=null}return t||null},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerVersion()}catch(t){n.warn("An error occured while calling getPlayerVersion",t)}return t},getPlayerName:function(){var t="";if(this._adapter)try{t=this._adapter.getPlayerName()}catch(t){n.warn("An error occured while calling getPlayerName",t)}return t},getCdn:function(){var t=null;return this.resourceTransform.isBlocking()||(t=this.resourceTransform.getCdnName()),t||this.options["content.cdn"]},getPluginVersion:function(){var t=this.getAdapterVersion();return t||(t=s+"-adapterless"),t},getAdapterVersion:function(){var t=null;if(this._adapter)try{t=this._adapter.getVersion()}catch(t){n.warn("An error occured while calling getPluginVersion",t)}return t},getCdnTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getCdnTraffic()}catch(t){n.warn("An error occured while calling getCdnTraffic",t)}return t},getP2PTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getP2PTraffic()}catch(t){n.warn("An error occured while calling getP2PTraffic",t)}return t},getUploadTraffic:function(){var t=null;if(this._adapter)try{t=this._adapter.getUploadTraffic()}catch(t){n.warn("An error occured while calling getUploadTraffic",t)}return t},getIsP2PEnabled:function(){var t=null;if(this._adapter)try{t=this._adapter.getIsP2PEnabled()}catch(t){n.warn("An error occured while calling getIsP2PEnabled",t)}return t},getStreamingProtocol:function(){var t=this.options["content.streamingProtocol"];return"string"!=typeof t?null:(t=t.toUpperCase(),"HDS"!=t&&"HLS"!=t&&"MSS"!=t&&"DASH"!=t&&"RTMP"!=t&&"RTP"!=t&&"RTSP"!=t?(n.warn("Streaming protocol "+t+" is not a valid value"),null):t)},getHouseholdId:function(){var t=null;if(this._adapter)try{t=this._adapter.getHouseholdId()}catch(t){n.warn("An error occurred while calling getHouseholdId",t)}return t},getLatency:function(){var t=null;if(this._adapter)try{t=this._adapter.getLatency()}catch(t){n.warn("An error occurred while calling getLatency",t)}return t},getPacketLoss:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketLoss()}catch(t){n.warn("An error occurred while calling getPacketLoss",t)}return t},getPacketSent:function(){var t=null;if(this._adapter)try{t=this._adapter.getPacketSent()}catch(t){n.warn("An error occurred while calling getPacketSent",t)}return t},getPreloadDuration:function(){return this.preloadChrono.getDeltaTime(!1)},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0}};t.exports=a},function(t,e,i){var n=i(0),r=i(3),s=i(15),a={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(t){t.plugin?n.warn("Adapters can only be added to a single plugin"):(this.removeAdsAdapter(),t.plugin=this,this._adsAdapter=t,this._adsAdapter.on(s.Event.INIT,this._adInitListener.bind(this)),this._adsAdapter.on(s.Event.START,this._adStartListener.bind(this)),this._adsAdapter.on(s.Event.JOIN,this._adJoinListener.bind(this)),this._adsAdapter.on(s.Event.PAUSE,this._adPauseListener.bind(this)),this._adsAdapter.on(s.Event.RESUME,this._adResumeListener.bind(this)),this._adsAdapter.on(s.Event.BUFFER_BEGIN,this._adBufferBeginListener.bind(this)),this._adsAdapter.on(s.Event.BUFFER_END,this._adBufferEndListener.bind(this)),this._adsAdapter.on(s.Event.STOP,this._adStopListener.bind(this)),this._adsAdapter.on(s.Event.ERROR,this._adErrorListener.bind(this)),this._adsAdapter.on(s.Event.CLICK,this._adClickListener.bind(this)),this._adsAdapter.on(s.Event.BLOCKED,this._adBlockedListener.bind(this)))},removeAdsAdapter:function(){this._adsAdapter&&(this._adsAdapter.dispose(),this._adsAdapter.plugin=null,this._adsAdapter.off(s.Event.INIT,this._adInitListener),this._adsAdapter.off(s.Event.START,this._adStartListener),this._adsAdapter.off(s.Event.JOIN,this._adJoinListener),this._adsAdapter.off(s.Event.PAUSE,this._adPauseListener),this._adsAdapter.off(s.Event.RESUME,this._adResumeListener),this._adsAdapter.off(s.Event.BUFFER_BEGIN,this._adBufferBeginListener),this._adsAdapter.off(s.Event.BUFFER_END,this._adBufferEndListener),this._adsAdapter.off(s.Event.STOP,this._adStopListener),this._adsAdapter.off(s.Event.ERROR,this._adErrorListener),this._adsAdapter.off(s.Event.CLICK,this._adClickListener),this._adsAdapter.off(s.Event.BLOCKED,this._adBlockedListener),this._adsAdapter=null)},_adInitListener:function(t){this._adapter&&(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd()),this.adInitSent=!0;var e=t.data.params||{};e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_START,r.Service.AD_INIT,e),n.notice(r.Service.AD_INIT+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")},_adStartListener:function(t){this._adapter&&(this._adapter.fireBufferEnd(),this._adapter.fireSeekEnd(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset());var e=t.data.params||{};if(this._adsAdapter.flags.isInited?e.adNumber=this.requestBuilder.lastSent.adNumber:e.adNumber=this.requestBuilder.getNewAdNumber(),!this.options["ad.ignore"]){!(!this._adsAdapter.getResource()&&!this._adsAdapter.getTitle()||"number"!=typeof this._adsAdapter.getDuration())?(this.adStartSent=!0,this._send(r.WillSendEvent.WILL_SEND_AD_START,r.Service.AD_START,e),n.notice(r.Service.AD_START+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")):this._adsAdapter.flags.isInited||(this.adInitSent=!0,this._send(r.WillSendEvent.WILL_SEND_AD_INIT,r.Service.AD_INIT,e),n.notice(r.Service.AD_INIT+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s"))}},_adJoinListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||!this.adInitSent||this.adStartSent||(this._send(r.WillSendEvent.WILL_SEND_AD_START,r.Service.AD_START,e),n.notice(r.Service.AD_START+" "+e.adPosition+e.adNumber+" at "+e.playhead+"s")),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_JOIN,r.Service.AD_JOIN,e),n.notice(r.Service.AD_JOIN+" "+e.adJoinDuration+"ms"),this.adInitSent=!1,this.adStartSent=!1},_adPauseListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_PAUSE,r.Service.AD_PAUSE,e),n.notice(r.Service.AD_PAUSE+" at "+e.adPlayhead+"s")},_adResumeListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_RESUME,r.Service.AD_RESUME,e),n.notice(r.Service.AD_RESUME+" "+e.adPauseDuration+"ms")},_adBufferBeginListener:function(t){n.notice("Ad Buffer Begin"),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_BUFFER,r.Service.AD_BUFFER,e),n.notice(r.Service.AD_BUFFER+" "+e.adBufferDuration+"ms")},_adStopListener:function(t){this._adapter&&!this._adapter.flags.isJoined&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+this._adsAdapter.chronos.total.getDeltaTime(),(new Date).getTime()));var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_STOP,r.Service.AD_STOP,e),n.notice(r.Service.AD_STOP+" "+e.adTotalDuration+"ms")},_adErrorListener:function(t){var e=t.data.params||{};this._adapter&&!this._adapter.flags.isStarted?e.adNumber=this.requestBuilder.lastSent.adNumber:e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_ERROR,r.Service.AD_ERROR,e),n.notice(r.Service.AD_ERROR)},_adClickListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.lastSent.adNumber,this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_CLICK,r.Service.AD_CLICK,e),n.notice(r.Service.AD_CLICK)},_adBlockedListener:function(t){var e=t.data.params||{};e.adNumber=this.requestBuilder.getNewAdNumber(),this.options["ad.ignore"]||this._send(r.WillSendEvent.WILL_SEND_AD_BLOCKED,r.Service.AD_BLOCKED,e),n.notice(r.Service.AD_BLOCKED)}};t.exports=a},function(t,e,i){var n=i(0),r=i(2),s={getAdPlayerVersion:function(){var t="";if(this._adsAdapter)try{t=this._adsAdapter.getPlayerVersion()}catch(t){n.warn("An error occured while calling getAdPlayerVersion",t)}return t},getAdPosition:function(){var t="pre";if(this._adsAdapter)try{t=this._adsAdapter.getPosition()}catch(t){n.warn("An error occured while calling getAdPosition",t)}return!t&&this._adapter&&(t=this._adapter.flags.isJoined?"mid":"pre"),t},getAdPlayhead:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getPlayhead()}catch(t){n.warn("An error occured while calling getAdPlayhead",t)}return r.parseNumber(t,0)},getAdDuration:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getDuration()}catch(t){n.warn("An error occured while calling getAdDuration",t)}return r.parseNumber(t,0)},getAdBitrate:function(){var t=null;if(this._adsAdapter){try{t=this._adsAdapter.getBitrate()}catch(t){n.warn("An error occured while calling getAdBitrate",t)}t&&-1!==t||(t=this.getWebkitAdBitrate())}return r.parseNumber(t,-1)},getWebkitAdBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var t=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var e=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;t=Math.round(e/this.viewTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==t?t:-1}},getAdTitle:function(){var t=null;if(this.options["ad.title"])return this.options["ad.title"];if(this._adsAdapter)try{t=this._adsAdapter.getTitle()}catch(t){n.warn("An error occured while calling getAdTitle",t)}return t},getAdResource:function(){var t=null;if(this.options["ad.resource"])return this.options["ad.resource"];if(this._adsAdapter)try{t=this._adsAdapter.getResource()}catch(t){n.warn("An error occured while calling getAdResource",t)}return t},getAdCampaign:function(){return this.options["ad.campaign"]?this.options["ad.campaign"]:null},getAdAdapterVersion:function(){var t=null;if(this._adsAdapter)try{t=this._adsAdapter.getVersion()}catch(t){n.warn("An error occured while calling getAdsAdapterVersion",t)}return t},getAdMetadata:function(){return this.options["ad.metadata"]},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1}};t.exports=s},function(t,e,i){var n=i(0),r=i(3),s={_startPings:function(){this._ping.isRunning||this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(t){var e={diffTime:t,entities:this.requestBuilder.getChangedEntities()};this._adapter&&(e=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(e,["pauseDuration"]):this.requestBuilder.fetchParams(e,["bitrate","throughput","fps"]),this._adapter.flags.isJoined&&(e=this.requestBuilder.fetchParams(e,["playhead"])),this._adapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["bufferDuration"])),this._adapter.flags.isSeeking&&(e=this.requestBuilder.fetchParams(e,["seekDuration"])),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(e=this.requestBuilder.fetchParams(e,["adPlayhead"]),e=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(e,["adPauseDuration"]):this.requestBuilder.fetchParams(e,["adBitrate"])),this._adsAdapter.flags.isBuffering&&(e=this.requestBuilder.fetchParams(e,["adBufferDuration"])))),this._send(r.WillSendEvent.WILL_SEND_PING,r.Service.PING,e),n.verbose(r.Service.PING)}};t.exports=s},function(t,e,i){var n=i(0),r=i(2),s=i(3),a={firePreloadBegin:function(){this.isPreloading||(this.isPreloading=!0,this.preloadChrono.start())},firePreloadEnd:function(){this.isPreloading&&(this.isPreloading=!1,this.preloadChrono.stop())},fireInit:function(t){this.isInitiated||this.getAdapter()&&(!this.getAdapter()||this.getAdapter().flags.isInited||this.getAdapter().flags.isStarted)||(this.viewTransform.nextView(),this._initComm(),this._startPings(),this.initChrono.start(),this.isInitiated=!0,t=t||{},this._send(s.WillSendEvent.WILL_SEND_INIT,s.Service.INIT,t),n.notice(s.Service.INIT+" "+(t.title||t.mediaResource)))},fireError:function(t,e,i,a){this.isInitiated||this.getAdapter()&&(this.getAdapter().flags.isStarted||this.getAdapter().flags.isInited)||this.viewTransform.nextView(),this._comm||this._initComm();var o=r.buildErrorParams(t,e,i,a);this._send(s.WillSendEvent.WILL_SEND_ERROR,s.Service.ERROR,o),n.notice(s.Service.ERROR+" "+o.errorLevel+" "+o.errorCode),"fatal"===o.errorLevel&&(this._reset(),this.viewTransform.nextView())},fireFatalError:function(t,e,i){this.options["ad.afterStop"]=0,this.fireError(t,e,i,"fatal"),this._adapter?this._adapter.fireStop():this.fireStop()},fireStop:function(t){t&&void 0!==t.end&&t.end&&(t.end=void 0,this.options["ad.afterStop"]=0),this._adapter&&(this._adapter.flags.isEnded=!0,this._adapter.flags.isPaused&&(t||(t={}),t.pauseDuration=this._adapter.chronos.pause.getDeltaTime())),this._adsAdapter||(this.options["ad.afterStop"]=0),0===this.options["ad.afterStop"]&&(this._adapter&&(this._adapter.flags.isStopped=!0),t=t||{},this._send(s.WillSendEvent.WILL_SEND_STOP,s.Service.STOP,t),n.notice(s.Service.STOP+" at "+t.playhead+"s"),this._reset())}};t.exports=a},function(t,e,i){var n=i(3),r=i(0),s=i(5),a=i(14),o={_initInfinity:function(){this.infinity.on(a.Event.NAV,this._navListener.bind(this)),this.infinity.on(a.Event.SESSION_START,this._sessionStartListener.bind(this)),this.infinity.on(a.Event.SESSION_STOP,this._sessionStopListener.bind(this)),this.infinity.on(a.Event.EVENT,this._eventListener.bind(this))},_sendInfinity:function(t,e,i){i=this.requestBuilder.buildParams(i,e);var n={params:i,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};this.emit(t,n),this.infinity._comm&&null!==i&&this.options.enabled&&(this.lastServeiceSent=e,this.infinity._comm.sendRequest(new s(null,e,i)))},_navListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_NAV,n.Service.NAV,e),this._beat.isRunning||this._beat.start(),r.notice(n.Service.NAV+" "+e.route)},_sessionStartListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_SESSION_START,n.Service.SESSION_START,e),this._beat.isRunning||this._beat.start(),r.notice(n.Service.SESSION_START+" "+e.route)},_sessionStopListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_SESSION_STOP,n.Service.SESSION_STOP,e),this._beat.isRunning||this._beat.stop(),r.notice(n.Service.SESSION_STOP+" "+e.route)},_eventListener:function(t){var e=t.data.params||{};this._sendInfinity(n.WillSendEvent.WILL_SEND_EVENT,n.Service.EVENT,e),r.notice(n.Service.EVENT+" "+e.name)},_sendBeat:function(t){var e={diffTime:t,sessions:[this.getSessionId()]};this._sendInfinity(n.WillSendEvent.WILL_SEND_BEAT,n.Service.BEAT,e),r.verbose(n.Service.BEAT)}};t.exports=o},function(t,e){var i={getSessionId:function(){return this.storage.getLocal("session")},getContext:function(){return this.storage.getSession("context")},getStoredData:function(){return this.storage.getSession("data")},getPageName:function(){if(document&&document.title)return document.title},getIsSessionExpired:function(){var t=this.storage.getSession("lastactive")+this.options["session.expire"],e=(new Date).getTime();return!(this.getSessionId()&&t>e)},getIsDataExpired:function(){var t=this.storage.getSession("lastactive")+this.options["session.expire"],e=(new Date).getTime();return!(this.getStoredData()&&t>e)}};t.exports=i},function(t,e,i){"use strict";var n=i(9),r=i(10);r.adapters.Kaltura=r.Adapter.extend({constructor:function(t,e){this.config=e,r.adapters.Kaltura.__super__.constructor.call(this,t)},getVersion:function(){return"6.2.0-kaltura"},getPlayhead:function(){return this.player.currentTime},getPlayrate:function(){return this.player.playbackRate},getDuration:function(){return this.player.duration||null},getBitrate:function(){var t=this.player.getActiveTracks().video;return t&&t.bandwidth?t.bandwidth:null},getRendition:function(){var t=this.player.getActiveTracks().video;return t?r.Util.buildRenditionString(t.width,t.height,t.bandwidth):null},getTitle:function(){return this.config.entryName},getIsLive:function(){return"Live"===this.config.entryType},getResource:function(){return this.player.src},getPlayerVersion:function(){return this.config.playerVersion},getPlayerName:function(){return this.config.playerName},getHouseholdId:function(){return this.config.householdId},registerListeners:function(){var t=this.player.Event;this.references=[],this.references[t.PLAY]=this.playListener.bind(this),this.references[t.LOAD_START]=this.playListener.bind(this),this.references[t.PAUSE]=this.pauseListener.bind(this),this.references[t.PLAYING]=this.playingListener.bind(this),this.references[t.ERROR]=this.errorListener.bind(this),this.references[t.SEEKING]=this.seekingListener.bind(this),this.references[t.SEEKED]=this.seekedListener.bind(this),this.references[t.PLAYER_STATE_CHANGED]=this.stateChangeListener.bind(this),this.references[t.ENDED]=this.endedListener.bind(this),this.references[t.CHANGE_SOURCE_STARTED]=this.forceEndedListener.bind(this),this.references[t.AD_LOADED]=this.adLoadedListener.bind(this);for(var e in this.references)this.player.addEventListener(e,this.references[e])},unregisterListeners:function(){if(this.player&&this.references){for(var t in this.references)this.player.removeEventListener(t,this.references[t]);this.references=[]}},bindLogger:function(t){r.Log.error=t.error.bind(t),r.Log.notice=t.info.bind(t),r.Log.warn=t.warn.bind(t),r.Log.debug=t.debug.bind(t),r.Log.verbose=function(){}},playListener:function(){this.flags.isStarted||(this.fireStart(),this.plugin.options["content.isLive.noSeek"]=!this.player.isDvr(),this.initialPlayhead=this.getPlayhead())},timeupdateListener:function(){this.fireStart(),this.fireJoin()},pauseListener:function(){this.firePause()},playingListener:function(){this.fireResume(),this.fireSeekEnd(),this.fireBufferEnd(),this.fireStart(),this.fireJoin()},errorListener:function(t){t.payload.severity===n.Error.Severity.CRITICAL&&(this.fireError(t.payload.code,t.payload.data),this.fireStop())},seekingListener:function(){this.flags.isBuffering||this.initialPlayhead===this.getPlayhead()||this.fireSeekBegin()},seekedListener:function(){this.fireSeekEnd()},stateChangeListener:function(t){t.payload.newState.type===this.player.State.BUFFERING&&this.initialPlayhead!==this.getPlayhead()&&this.fireBufferBegin(),t.payload.oldState.type===this.player.State.BUFFERING&&this.fireBufferEnd()},endedListener:function(){this.stopBlockedByAds||(this.fireStop(),this.reset())},forceEndedListener:function(){this.fireStop(),this.reset()},adLoadedListener:function(){this.playListener(),this.stopBlockedByAds=!0,this.plugin.getAdsAdapter()||this.plugin.setAdsAdapter(new r.adapters.Kaltura.NativeAdsAdapter(this.player))},reset:function(){this.stopBlockedByAds=!1,this.initialPlayhead=null}},{NativeAdsAdapter:i(55)}),t.exports=r.adapters.Kaltura},function(t,e,i){"use strict";var n=i(10),r=n.Adapter.extend({getVersion:function(){return"6.2.0-kaltura-ads"},getPlayhead:function(){return this.currentTime},getDuration:function(){return this.duration},getPosition:function(){return this.plugin.getAdapter().flags.isJoined?!this.plugin.getAdapter().isLive()&&this.plugin.getAdapter().getPlayhead()>this.plugin.getAdapter().getDuration()-1?"post":"mid":"pre"},registerListeners:function(){this.monitorPlayhead(!0,!1);var t=this.player.Event;this.references=[],this.references[t.AD_LOADED]=this.startAdListener.bind(this),this.references[t.AD_STARTED]=this.startAdListener.bind(this),this.references[t.AD_RESUMED]=this.resumeAdListener.bind(this),this.references[t.AD_PAUSED]=this.pauseAdListener.bind(this),this.references[t.AD_CLICKED]=this.clickAdListener.bind(this),this.references[t.AD_SKIPPED]=this.skipAdListener.bind(this),this.references[t.AD_COMPLETED]=this.stopAdListener.bind(this),this.references[t.AD_ERROR]=this.errorAdListener.bind(this),this.references[t.AD_PROGRESS]=this.progressAdListener.bind(this),this.references[t.ALL_ADS_COMPLETED]=this.allAdsCompletedListener.bind(this);for(var e in this.references)this.player.addEventListener(e,this.references[e])},unregisterListeners:function(){if(this.monitor.stop(),this.player&&this.references){for(var t in this.references)this.player.removeEventListener(t,this.references[t]);this.references=[]}},startAdListener:function(t){this.fireStart()},stopAdListener:function(){this.fireStop(),this.currentTime=null,this.duration=null},resumeAdListener:function(){this.fireResume()},pauseAdListener:function(){this.firePause()},clickAdListener:function(){this.fireClick()},skipAdListener:function(){this.fireStop({skipped:!0}),this.currentTime=null,this.duration=null},errorAdListener:function(){this.fireError()},allAdsCompletedListener:function(){this.fireStop(),this.plugin.getAdapter().stopBlockedByAds=!1,"post"===this.getPosition()&&this.plugin.getAdapter().fireStop()},progressAdListener:function(t){this.currentTime=t.payload.adProgress.currentTime,this.duration=t.payload.adProgress.duration,this.fireJoin(),this.monitor.skipNextTick()}});t.exports=r}])});
//# sourceMappingURL=playkit-youbora.js.map